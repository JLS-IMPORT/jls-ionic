(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{TLzw:function(t,e,i){"use strict";i.r(e),i.d(e,"NotificationPageModule",(function(){return Q}));var s=i("ofXK"),n=i("3Pt+"),o=i("TEn/"),a=i("tyNb"),r=i("mrSG"),c=i("n3qt"),l=i("dir2"),b=i("fXoL"),u=i("sYmb"),g=i("MDGB"),d=i("kwrG"),h=i("x7k0");function f(t,e){1&t&&(b.Qb(0,"div",5),b.Lb(1,"ion-spinner",6),b.Qb(2,"p",7),b.uc(3),b.bc(4,"translate"),b.Pb(),b.Pb()),2&t&&(b.zb(3),b.wc("",b.cc(4,1,"Loading"),"..."))}function p(t,e){1&t&&(b.Qb(0,"p",8),b.uc(1),b.bc(2,"translate"),b.Pb()),2&t&&(b.zb(1),b.vc(b.cc(2,1,"NoDataToDisplay")))}function m(t,e){1&t&&b.Lb(0,"ion-icon",14)}function w(t,e){if(1&t){const t=b.Rb();b.Qb(0,"ion-item",9),b.Yb("click",(function(){b.nc(t);const i=e.$implicit;return b.ac().readDetailInfo(i)})),b.Qb(1,"ion-avatar",10),b.Lb(2,"img",11),b.Pb(),b.Qb(3,"ion-label"),b.Qb(4,"h2"),b.uc(5),b.bc(6,"translate"),b.tc(7,m,1,0,"ion-icon",12),b.Pb(),b.Qb(8,"p"),b.uc(9),b.Qb(10,"span",13),b.uc(11),b.Pb(),b.Pb(),b.Pb(),b.Pb()}if(2&t){const t=e.$implicit;b.zb(5),b.wc("",b.cc(6,4,"notification.Systemmessage")," "),b.zb(2),b.gc("ngIf",null==t.IsReaded||0==t.IsReaded),b.zb(2),b.wc("",t.Title," "),b.zb(2),b.wc(" ",t.CreatedOn," ")}}const I=[{path:"",component:(()=>{class t extends c.a{constructor(t,e,i,s,n,o,a,r){super(),this.navCtrl=t,this.formBuilder=e,this.translateService=i,this.toastCtrl=s,this.rest=n,this.network=o,this.modalCtrl=a,this.utils=r,this.counter=0,this.step=15,this.messageList=[],this.loading=!1}ngOnInit(){}ionViewWillEnter(){this.loadMesage()}loadMesage(){if("none"!=this.network.type){var t={UserId:localStorage.getItem("userId"),Step:this.step,Begin:this.counter};this.loading=!0,this.rest.GetMessageByUserAndStatus(t).subscribe(t=>{null!=t.List&&t.List.length>0&&(this.messageList=t.List,this.messageList.filter(t=>0==t.IsReaded)),this.loading=!1},t=>{this.loading=!1,super.showToast(this.toastCtrl,this.translateService.instant("Msg_Error"))})}else super.showToast(this.toastCtrl,this.translateService.instant("Msg_Offline"))}readDetailInfo(t){return Object(r.a)(this,void 0,void 0,(function*(){null!=t.IsReaded&&0!=t.IsReaded||this.utils.newMessageNumberSubject.next(this.utils.newMessageNumberSubject.value-1);var e=yield this.modalCtrl.create({component:l.a,componentProps:{SystemMessage:t}});yield e.present(),e.onDidDismiss().then(()=>{this.loadMesage()})}))}doInfinite(t){if("none"!=this.network.type){this.counter=this.counter+1;var e={UserId:localStorage.getItem("userId"),Step:this.step,Begin:this.counter};this.rest.GetMessageByUserAndStatus(e).subscribe(e=>{null!=e&&null!=e.List?e.TotalCount<=this.step*this.counter?(t.target.complete(),t.target.disabled=!0):(this.messageList=this.messageList.concat(null!=e.List?e.List:[]),t.target.complete()):super.showToast(this.toastCtrl,this.translateService.instant("Msg_Error"))},t=>{super.showToast(this.toastCtrl,this.translateService.instant("Msg_Error"))})}else super.showToast(this.toastCtrl,this.translateService.instant("Msg_Offline"))}}return t.\u0275fac=function(e){return new(e||t)(b.Kb(o.ab),b.Kb(n.b),b.Kb(u.d),b.Kb(o.fb),b.Kb(g.a),b.Kb(d.a),b.Kb(o.Z),b.Kb(h.a))},t.\u0275cmp=b.Eb({type:t,selectors:[["app-notification"]],features:[b.wb],decls:12,vars:6,consts:[["class","spinner ion-text-center ion-margin-top",4,"ngIf"],["class","ion-text-center","text-center","",4,"ngIf"],["button","",3,"click",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading"],[1,"spinner","ion-text-center","ion-margin-top"],[1,"ion-text-center"],["font-size-small","",1,"ion-text-center"],["text-center","",1,"ion-text-center"],["button","",3,"click"],["item-left","",1,"ion-float-left"],["src","assets/imgs/SystemMessage.jpg"],["name","eye","style","float: right;",4,"ngIf"],[2,"float","right"],["name","eye",2,"float","right"]],template:function(t,e){1&t&&(b.Qb(0,"ion-header"),b.Qb(1,"ion-toolbar"),b.Qb(2,"ion-title"),b.uc(3),b.bc(4,"translate"),b.Pb(),b.Pb(),b.Pb(),b.Qb(5,"ion-content"),b.tc(6,f,5,3,"div",0),b.tc(7,p,3,3,"p",1),b.Qb(8,"ion-list"),b.tc(9,w,12,6,"ion-item",2),b.Pb(),b.Qb(10,"ion-infinite-scroll",3),b.Yb("ionInfinite",(function(t){return e.doInfinite(t)})),b.Lb(11,"ion-infinite-scroll-content",4),b.Pb(),b.Pb()),2&t&&(b.zb(3),b.vc(b.cc(4,4,"notification.notification")),b.zb(3),b.gc("ngIf",e.loading),b.zb(1),b.gc("ngIf",!e.loading&&(null==e.messageList||e.messageList.length<=0)),b.zb(2),b.gc("ngForOf",e.messageList))},directives:[o.t,o.V,o.U,o.q,s.k,o.B,s.j,o.w,o.x,o.O,o.z,o.d,o.A,o.u],pipes:[u.c],styles:[".mat-form-field[_ngcontent-%COMP%]{display:inline}"]}),t})()}];let v=(()=>{class t{}return t.\u0275mod=b.Ib({type:t}),t.\u0275inj=b.Hb({factory:function(e){return new(e||t)},imports:[[a.i.forChild(I)],a.i]}),t})();var L=i("kmnG"),y=i("qFsG"),P=i("xHqg"),S=i("bTqV"),M=i("NFeN");let Q=(()=>{class t{}return t.\u0275mod=b.Ib({type:t}),t.\u0275inj=b.Hb({factory:function(e){return new(e||t)},imports:[[s.b,n.e,o.W,v,L.e,y.b,P.d,S.b,M.b,u.b]]}),t})()}}]);