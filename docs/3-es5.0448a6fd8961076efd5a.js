!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e,i){return(n="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(i){var o=Object.getOwnPropertyDescriptor(i,e);return o.get?o.get.call(n):o.value}})(t,e,i||t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=s(t);if(e){var o=s(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return r(this,n)}}function r(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{TLzw:function(r,a,c){"use strict";c.r(a),c.d(a,"NotificationPageModule",(function(){return z}));var l=c("ofXK"),u=c("3Pt+"),f=c("TEn/"),b=c("tyNb"),p=c("mrSG"),g=c("n3qt"),d=c("dir2"),h=c("fXoL"),m=c("sYmb"),y=c("MDGB"),v=c("kwrG"),w=c("x7k0");function P(t,e){1&t&&(h.Qb(0,"div",5),h.Lb(1,"ion-spinner",6),h.Qb(2,"p",7),h.uc(3),h.bc(4,"translate"),h.Pb(),h.Pb()),2&t&&(h.zb(3),h.wc("",h.cc(4,1,"Loading"),"..."))}function I(t,e){1&t&&(h.Qb(0,"p",8),h.uc(1),h.bc(2,"translate"),h.Pb()),2&t&&(h.zb(1),h.vc(h.cc(2,1,"NoDataToDisplay")))}function O(t,e){1&t&&h.Lb(0,"ion-icon",14)}function L(t,e){if(1&t){var n=h.Rb();h.Qb(0,"ion-item",9),h.Yb("click",(function(){h.nc(n);var t=e.$implicit;return h.ac().readDetailInfo(t)})),h.Qb(1,"ion-avatar",10),h.Lb(2,"img",11),h.Pb(),h.Qb(3,"ion-label"),h.Qb(4,"h2"),h.uc(5),h.bc(6,"translate"),h.tc(7,O,1,0,"ion-icon",12),h.Pb(),h.Qb(8,"p"),h.uc(9),h.Qb(10,"span",13),h.uc(11),h.Pb(),h.Pb(),h.Pb(),h.Pb()}if(2&t){var i=e.$implicit;h.zb(5),h.wc("",h.cc(6,4,"notification.Systemmessage")," "),h.zb(2),h.gc("ngIf",null==i.IsReaded||0==i.IsReaded),h.zb(2),h.wc("",i.Title," "),h.zb(2),h.wc(" ",i.CreatedOn," ")}}var S,k,x,M=[{path:"",component:(S=function(r){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}(f,r);var a,c,l,u=o(f);function f(e,n,i,o,r,s,a,c){var l;return t(this,f),(l=u.call(this)).navCtrl=e,l.formBuilder=n,l.translateService=i,l.toastCtrl=o,l.rest=r,l.network=s,l.modalCtrl=a,l.utils=c,l.counter=0,l.step=15,l.messageList=[],l.loading=!1,l}return a=f,(c=[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){this.loadMesage()}},{key:"loadMesage",value:function(){var t=this;if("none"!=this.network.type){var e={UserId:localStorage.getItem("userId"),Step:this.step,Begin:this.counter};this.loading=!0,this.rest.GetMessageByUserAndStatus(e).subscribe((function(e){null!=e.List&&e.List.length>0&&(t.messageList=e.List,t.messageList.filter((function(t){return 0==t.IsReaded}))),t.loading=!1}),(function(e){t.loading=!1,n(s(f.prototype),"showToast",t).call(t,t.toastCtrl,t.translateService.instant("Msg_Error"))}))}else n(s(f.prototype),"showToast",this).call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"))}},{key:"readDetailInfo",value:function(t){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!=t.IsReaded&&0!=t.IsReaded||this.utils.newMessageNumberSubject.next(this.utils.newMessageNumberSubject.value-1),e.next=3,this.modalCtrl.create({component:d.a,componentProps:{SystemMessage:t}});case 3:return n=e.sent,e.next=6,n.present();case 6:n.onDidDismiss().then((function(){i.loadMesage()}));case 7:case"end":return e.stop()}}),e,this)})))}},{key:"doInfinite",value:function(t){var e=this;if("none"!=this.network.type){this.counter=this.counter+1;var i={UserId:localStorage.getItem("userId"),Step:this.step,Begin:this.counter};this.rest.GetMessageByUserAndStatus(i).subscribe((function(i){null!=i&&null!=i.List?i.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.messageList=e.messageList.concat(null!=i.List?i.List:[]),t.target.complete()):n(s(f.prototype),"showToast",e).call(e,e.toastCtrl,e.translateService.instant("Msg_Error"))}),(function(t){n(s(f.prototype),"showToast",e).call(e,e.toastCtrl,e.translateService.instant("Msg_Error"))}))}else n(s(f.prototype),"showToast",this).call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"))}}])&&e(a.prototype,c),l&&e(a,l),f}(g.a),S.\u0275fac=function(t){return new(t||S)(h.Kb(f.ab),h.Kb(u.b),h.Kb(m.d),h.Kb(f.fb),h.Kb(y.a),h.Kb(v.a),h.Kb(f.Z),h.Kb(w.a))},S.\u0275cmp=h.Eb({type:S,selectors:[["app-notification"]],features:[h.wb],decls:12,vars:6,consts:[["class","spinner ion-text-center ion-margin-top",4,"ngIf"],["class","ion-text-center","text-center","",4,"ngIf"],["button","",3,"click",4,"ngFor","ngForOf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading"],[1,"spinner","ion-text-center","ion-margin-top"],[1,"ion-text-center"],["font-size-small","",1,"ion-text-center"],["text-center","",1,"ion-text-center"],["button","",3,"click"],["item-left","",1,"ion-float-left"],["src","assets/imgs/SystemMessage.jpg"],["name","eye","style","float: right;",4,"ngIf"],[2,"float","right"],["name","eye",2,"float","right"]],template:function(t,e){1&t&&(h.Qb(0,"ion-header"),h.Qb(1,"ion-toolbar"),h.Qb(2,"ion-title"),h.uc(3),h.bc(4,"translate"),h.Pb(),h.Pb(),h.Pb(),h.Qb(5,"ion-content"),h.tc(6,P,5,3,"div",0),h.tc(7,I,3,3,"p",1),h.Qb(8,"ion-list"),h.tc(9,L,12,6,"ion-item",2),h.Pb(),h.Qb(10,"ion-infinite-scroll",3),h.Yb("ionInfinite",(function(t){return e.doInfinite(t)})),h.Lb(11,"ion-infinite-scroll-content",4),h.Pb(),h.Pb()),2&t&&(h.zb(3),h.vc(h.cc(4,4,"notification.notification")),h.zb(3),h.gc("ngIf",e.loading),h.zb(1),h.gc("ngIf",!e.loading&&(null==e.messageList||e.messageList.length<=0)),h.zb(2),h.gc("ngForOf",e.messageList))},directives:[f.t,f.V,f.U,f.q,l.k,f.B,l.j,f.w,f.x,f.O,f.z,f.d,f.A,f.u],pipes:[m.c],styles:[".mat-form-field[_ngcontent-%COMP%]{display:inline}"]}),S)}],R=((k=function e(){t(this,e)}).\u0275mod=h.Ib({type:k}),k.\u0275inj=h.Hb({factory:function(t){return new(t||k)},imports:[[b.i.forChild(M)],b.i]}),k),j=c("kmnG"),Q=c("qFsG"),C=c("xHqg"),T=c("bTqV"),_=c("NFeN"),z=((x=function e(){t(this,e)}).\u0275mod=h.Ib({type:x}),x.\u0275inj=h.Hb({factory:function(t){return new(t||x)},imports:[[l.b,u.e,f.W,R,j.e,Q.b,C.d,T.b,_.b,m.b]]}),x)}}])}();