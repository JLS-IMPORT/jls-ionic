(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"6hUG":function(t,i,o){"use strict";o.r(i),o.d(i,"ProductDetailPageModule",(function(){return w}));var e=o("ofXK"),c=o("3Pt+"),n=o("TEn/"),s=o("tyNb"),r=o("mrSG"),a=o("n3qt"),l=o("AytR"),u=o("fXoL"),d=o("sYmb"),b=o("e8h1"),h=o("x7k0"),p=o("MDGB"),g=o("kwrG"),m=o("j7Is");function P(t,i){if(1&t&&u.Lb(0,"img",25),2&t){const t=u.ac().$implicit,i=u.ac();u.gc("src",i.host+t.Path,u.oc)}}function f(t,i){if(1&t&&(u.Qb(0,"ion-slide"),u.tc(1,P,1,1,"img",24),u.Pb()),2&t){const t=i.$implicit;u.zb(1),u.gc("ngIf",t.Path)}}function v(t,i){1&t&&u.Lb(0,"img",26)}function I(t,i){if(1&t){const t=u.Rb();u.Qb(0,"span",27),u.Yb("click",(function(){return u.nc(t),u.ac().displayAvis()})),u.uc(1),u.bc(2,"translate"),u.Pb()}if(2&t){const t=u.ac();u.zb(1),u.xc("(",t.product.Comments.length," ",u.cc(2,2,"product-detail.avis"),")")}}function Q(t,i){if(1&t&&(u.Qb(0,"ion-item"),u.uc(1),u.bc(2,"translate"),u.Pb()),2&t){const t=u.ac();u.zb(1),u.xc(" ",u.cc(2,2,"product-detail.Price")," : ",t.product.Price," \u20ac ")}}const C=[{path:"",component:(()=>{class t extends a.a{constructor(t,i,o,e,c,n,s,r){super(),this.navCtrl=t,this.translateService=i,this.storage=o,this.utilis=e,this.rest=c,this.network=n,this.toastCtrl=s,this.router=r,this.isFavorite=!1,this.hasBought=!1,this.logined=!1,this.product={},this.host=l.a.SERVER_API_URL}ngOnInit(){console.log("ionViewDidLoad ProductDetailPage"),this.productId=this.router.snapshot.queryParams.productId,this.checkLogined(),this.initLoadData()}ionViewDidLoad(){}addProductIntoFavoriteList(){this.logined?(this.isFavorite=!this.isFavorite,"none"!=this.network.type?this.rest.AddIntoProductFavoriteList({UserId:localStorage.getItem("userId"),ProductId:this.product.ProductId,IsFavorite:this.isFavorite}).subscribe(t=>{null!=t&&t>0&&super.showToast(this.toastCtrl,this.translateService.instant(0==this.isFavorite?"Msg_RemoveIntoFavoriteList":"Msg_AddFavoriteList"))},t=>{super.showToast(this.toastCtrl,t.Msg)}):super.showToast(this.toastCtrl,this.translateService.instant("Msg_Offline"))):super.showToast(this.toastCtrl,this.translateService.instant("Msg_NotConnected"))}writeEvaluation(){this.logined?this.hasBought?this.navCtrl.navigateForward("WriteProductEvaluationPage",{queryParams:{productId:this.productId}}):super.showToast(this.toastCtrl,this.translateService.instant("Msg_CantComment")):super.showToast(this.toastCtrl,this.translateService.instant("Msg_NotConnected"))}calculCommentAverageLevel(){var t=5;if(null!=this.product&&null!=this.product.Comments&&this.product.Comments.length>0){var i=0;this.product.Comments.forEach(t=>{i=t.Level+i}),t=i/this.product.Comments.length}return t}initLoadData(){null!=this.productId&&0!=this.productId&&this.rest.GetProductById(this.productId).subscribe(t=>{null!=t&&(console.log(t),this.product=t,this.isFavorite=t.IsFavorite,this.hasBought=t.HasBought)},t=>{})}checkLogined(){return Object(r.a)(this,void 0,void 0,(function*(){this.logined=yield this.utilis.checkIsLogined()}))}displayAvis(){null!=this.product.Comments&&this.product.Comments.length>0&&this.navCtrl.navigateForward("ProductEvaluationListPage",{queryParams:{type:"GetCommentByProductId",productId:this.productId}})}addInCart(t,i){const o=Object.create(null,{showToast:{get:()=>super.showToast}});return Object(r.a)(this,void 0,void 0,(function*(){t.stopPropagation();var e=yield this.utilis.getKey("cartProductList"),c=[];null!=e&&(c=JSON.parse(e)),null==c.find(t=>t.ReferenceId==i.ReferenceId)&&(null==i.Quantity&&(i.Quantity=0),c.push(i)),c.forEach(t=>{t.ReferenceId==i.ReferenceId&&(t.Quantity=t.Quantity+1),null==t.Selected&&(t.Selected=!1)}),this.storage.set("cartProductList",JSON.stringify(c)).then(()=>{o.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_AddInCart"))},t=>{console.log(t)})}))}}return t.\u0275fac=function(i){return new(i||t)(u.Kb(n.ab),u.Kb(d.d),u.Kb(b.b),u.Kb(h.a),u.Kb(p.a),u.Kb(g.a),u.Kb(n.fb),u.Kb(s.a))},t.\u0275cmp=u.Eb({type:t,selectors:[["app-product-detail"]],features:[u.wb],decls:66,vars:43,consts:[["slot","start"],["pager","",1,"slidePagers"],[4,"ngFor","ngForOf"],["class","productImg","src","assets/imgs/not-found.png",4,"ngIf"],[1,"ion-text-center"],["size","4","col-4","",1,"iconCol",3,"click"],["icon-only",""],["name","bookmark"],[1,"iconText"],["name","cart"],["size","4","col-4","",1,"iconCol"],["icon-only","",3,"click"],["name","create"],[2,"font-size","unset","color","#222"],["align-items-center","",3,"click"],["col-2","","size","2"],["color","primary","name","chatbox",2,"font-size","xx-large"],["col-6","","size","6"],["defaultIcon","ios-star-outline","activeColor","#534d7a","defaultColor","cadetblue","readonly","true","fontSize","24px",3,"rating"],["rating",""],["col-4","","size","4"],["float-right","","class","nombreAvis",3,"click",4,"ngIf"],[4,"ngIf"],[2,"color","black","font-size","1em"],["class","productDetailImg","style","height: 250px;",3,"src",4,"ngIf"],[1,"productDetailImg",2,"height","250px",3,"src"],["src","assets/imgs/not-found.png",1,"productImg"],["float-right","",1,"nombreAvis",3,"click"]],template:function(t,i){1&t&&(u.Qb(0,"ion-header"),u.Qb(1,"ion-toolbar"),u.Qb(2,"ion-buttons",0),u.Lb(3,"ion-back-button"),u.Pb(),u.Qb(4,"ion-title"),u.uc(5),u.bc(6,"uppercase"),u.Pb(),u.Pb(),u.Pb(),u.Qb(7,"ion-content"),u.Qb(8,"div"),u.Qb(9,"ion-slides",1),u.tc(10,f,2,1,"ion-slide",2),u.tc(11,v,1,0,"img",3),u.Pb(),u.Pb(),u.Qb(12,"div"),u.Qb(13,"ion-row",4),u.Qb(14,"ion-col",5),u.Yb("click",(function(){return i.addProductIntoFavoriteList()})),u.Qb(15,"ion-button",6),u.Lb(16,"ion-icon",7),u.Pb(),u.Qb(17,"p",8),u.uc(18),u.bc(19,"translate"),u.Pb(),u.Pb(),u.Qb(20,"ion-col",5),u.Yb("click",(function(t){return i.addInCart(t,i.product)})),u.Qb(21,"ion-button",6),u.Lb(22,"ion-icon",9),u.Pb(),u.Qb(23,"p",8),u.uc(24),u.bc(25,"translate"),u.Pb(),u.Pb(),u.Qb(26,"ion-col",10),u.Qb(27,"ion-button",11),u.Yb("click",(function(){return i.writeEvaluation()})),u.Lb(28,"ion-icon",12),u.Pb(),u.Qb(29,"p",8),u.uc(30),u.bc(31,"translate"),u.Pb(),u.Pb(),u.Pb(),u.Pb(),u.Qb(32,"ion-list"),u.Qb(33,"ion-item"),u.uc(34),u.Pb(),u.Qb(35,"ion-item"),u.Qb(36,"p",13),u.uc(37),u.bc(38,"translate"),u.Pb(),u.Pb(),u.Qb(39,"ion-item",14),u.Yb("click",(function(){return i.displayAvis()})),u.Qb(40,"ion-col",15),u.Lb(41,"ion-icon",16),u.Pb(),u.Qb(42,"ion-col",17),u.Lb(43,"ionic5-star-rating",18,19),u.Pb(),u.Qb(45,"ion-col",20),u.tc(46,I,3,4,"span",21),u.Pb(),u.Pb(),u.tc(47,Q,3,4,"ion-item",22),u.Qb(48,"ion-item"),u.uc(49),u.bc(50,"translate"),u.Pb(),u.Qb(51,"ion-item"),u.uc(52),u.bc(53,"translate"),u.Pb(),u.Qb(54,"ion-item"),u.uc(55),u.bc(56,"translate"),u.Pb(),u.Qb(57,"ion-item"),u.uc(58),u.bc(59,"translate"),u.Pb(),u.Qb(60,"ion-item"),u.uc(61),u.bc(62,"translate"),u.Pb(),u.Qb(63,"ion-item"),u.Qb(64,"p",23),u.uc(65),u.Pb(),u.Pb(),u.Pb(),u.Pb()),2&t&&(u.zb(5),u.wc("",u.cc(6,23,i.product.Label)," "),u.zb(5),u.gc("ngForOf",i.product.ImagesPath),u.zb(1),u.gc("ngIf",null==i.product.ImagesPath||0==i.product.ImagesPath.length),u.zb(7),u.vc(u.cc(19,25,"product-detail.Favorite")),u.zb(6),u.vc(u.cc(25,27,"product-detail.Cart")),u.zb(6),u.vc(u.cc(31,29,"product-detail.Avis")),u.zb(4),u.wc(" ",i.product.Label," "),u.zb(3),u.xc("",u.cc(38,31,"product-detail.R\xe9f\xe9rence")," : ",i.product.ReferenceCode,""),u.zb(6),u.gc("rating",i.calculCommentAverageLevel()),u.zb(3),u.gc("ngIf",null!=i.product.Comments&&i.product.Comments.length>0),u.zb(1),u.gc("ngIf",i.logined),u.zb(2),u.xc(" ",u.cc(50,33,"product-detail.Quantit\xe9Minimal")," : ",i.product.MinQuantity," "),u.zb(3),u.xc(" ",u.cc(53,35,"product-detail.Quantit\xe9parcolis")," : ",i.product.QuantityPerBox," "),u.zb(3),u.xc(" ",u.cc(56,37,"product-detail.Couleur"),": ",i.product.Color," "),u.zb(3),u.xc("",u.cc(59,39,"product-detail.Taille"),": ",i.product.Size,""),u.zb(3),u.xc("",u.cc(62,41,"product-detail.Material"),": ",i.product.Material,""),u.zb(4),u.wc("",i.product.Description," "))},directives:[n.t,n.V,n.i,n.e,n.f,n.U,n.q,n.N,e.j,e.k,n.H,n.p,n.h,n.u,n.B,n.z,m.a,n.M],pipes:[e.s,d.c],styles:[""]}),t})()}];let y=(()=>{class t{}return t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({factory:function(i){return new(i||t)},imports:[[s.i.forChild(C)],s.i]}),t})(),w=(()=>{class t{}return t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({factory:function(i){return new(i||t)},imports:[[e.b,c.e,n.W,y,d.b,m.b]]}),t})()}}]);