(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{J8OZ:function(t,n,e){"use strict";e.r(n),e.d(n,"MyAccountPageModule",(function(){return C}));var i=e("ofXK"),o=e("3Pt+"),s=e("TEn/"),a=e("tyNb"),c=e("mrSG"),r=e("n3qt"),l=e("bVho"),b=e("fXoL"),u=e("MDGB"),d=e("e8h1"),g=e("kwrG"),m=e("sYmb"),h=e("x7k0");let P=(()=>{class t extends r.a{constructor(t,n,e,i,o,s,a,c,r){super(),this.navCtrl=t,this.loadingCtrl=n,this.rest=e,this.toastCtrl=i,this.storage=o,this.modalCtrl=s,this.network=a,this.translateService=c,this.utils=r}ngOnInit(){}login(){const t=Object.create(null,{showToast:{get:()=>super.showToast}});return Object(c.a)(this,void 0,void 0,(function*(){if("none"!=this.network.type){var n=yield this.showLoading(this.loadingCtrl,this.translateService.instant("Loading"));this.rest.getNewRefreshToken({Email:this.email,Password:this.password}).subscribe(e=>{null!=e&&null!=e.authToken?(localStorage.setItem("login  Status","1"),localStorage.setItem("jwt",e.authToken.token),localStorage.setItem("username",e.authToken.username),localStorage.setItem("userId",e.authToken.userId),localStorage.setItem("expiration",e.authToken.expiration),localStorage.setItem("userRole",e.authToken.roles),localStorage.setItem("refreshToken",e.authToken.refresh_token),this.storage.set("userId",e.authToken.userId),this.storage.set("jwt",e.authToken.token),this.storage.set("refreshToken",e.authToken.refresh_token),this.utils.isLoginedSubject.next(!0),this.modalCtrl.dismiss()):t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Error")),n.dismiss()},e=>{null!=e?null!=e.LoginError&&t.showToast.call(this,this.toastCtrl,this.translateService.instant(e.LoginError)):t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Error")),n.dismiss()})}else this.translateService.instant("Msg_Offline")}))}registre(){this.modalCtrl.dismiss(),this.navCtrl.navigateRoot("RegistrePage")}findOutPassword(){this.modalCtrl.dismiss(),this.navCtrl.navigateRoot("ForgetPasswordPage")}dismiss(){this.modalCtrl.dismiss()}}return t.\u0275fac=function(n){return new(n||t)(b.Kb(s.ab),b.Kb(s.Y),b.Kb(u.a),b.Kb(s.fb),b.Kb(d.b),b.Kb(s.Z),b.Kb(g.a),b.Kb(m.d),b.Kb(h.a))},t.\u0275cmp=b.Eb({type:t,selectors:[["app-login"]],features:[b.wb],decls:34,vars:24,consts:[[1,"ion-text-center"],[3,"click"],["ion-text","","color","primary","showWhen","ios"],["name","md-close","showWhen","android"],[2,"margin-bottom","10px"],["position","floating"],["type","text",3,"ngModel","ngModelChange"],["type","password",3,"ngModel","ngModelChange"],[2,"margin-left","10px","text-decoration","underline",3,"click"],["padding",""],["color","primary","expand","block",3,"disabled","click"],["padding","",1,"ion-text-center"],["color","primary","fill","outline",3,"click"]],template:function(t,n){1&t&&(b.Qb(0,"ion-header"),b.Qb(1,"ion-toolbar"),b.Qb(2,"ion-title",0),b.uc(3),b.bc(4,"translate"),b.Pb(),b.Qb(5,"ion-buttons"),b.Qb(6,"ion-button",1),b.Yb("click",(function(){return n.dismiss()})),b.Qb(7,"span",2),b.uc(8),b.bc(9,"translate"),b.Pb(),b.Lb(10,"ion-icon",3),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(11,"ion-content"),b.Qb(12,"ion-list",4),b.Qb(13,"ion-item"),b.Qb(14,"ion-label",5),b.uc(15),b.bc(16,"translate"),b.Pb(),b.Qb(17,"ion-input",6),b.Yb("ngModelChange",(function(t){return n.email=t})),b.Pb(),b.Pb(),b.Qb(18,"ion-item"),b.Qb(19,"ion-label",5),b.uc(20),b.bc(21,"translate"),b.Pb(),b.Qb(22,"ion-input",7),b.Yb("ngModelChange",(function(t){return n.password=t})),b.Pb(),b.Pb(),b.Pb(),b.Qb(23,"a",8),b.Yb("click",(function(){return n.findOutPassword()})),b.uc(24),b.bc(25,"translate"),b.Pb(),b.Qb(26,"div",9),b.Qb(27,"ion-button",10),b.Yb("click",(function(){return n.login()})),b.uc(28),b.bc(29,"translate"),b.Pb(),b.Pb(),b.Qb(30,"div",11),b.Qb(31,"ion-button",12),b.Yb("click",(function(){return n.registre()})),b.uc(32),b.bc(33,"translate"),b.Pb(),b.Pb(),b.Pb()),2&t&&(b.zb(3),b.vc(b.cc(4,10,"signin.SignIn")),b.zb(5),b.vc(b.cc(9,12,"signin.Return")),b.zb(7),b.vc(b.cc(16,14,"signin.Email")),b.zb(2),b.gc("ngModel",n.email),b.zb(3),b.vc(b.cc(21,16,"signin.Password")),b.zb(2),b.gc("ngModel",n.password),b.zb(2),b.vc(b.cc(25,18,"signin.ForgetPassword")),b.zb(3),b.gc("disabled",null==n.email||""==n.email||null==n.password||""==n.password),b.zb(1),b.vc(b.cc(29,20,"signin.SignIn")),b.zb(4),b.vc(b.cc(33,22,"signin.Register")))},directives:[s.t,s.V,s.U,s.i,s.h,s.u,s.q,s.B,s.z,s.A,s.y,s.eb,o.i,o.l],pipes:[m.c],styles:[""]}),t})();function f(t,n){if(1&t){const t=b.Rb();b.Qb(0,"div"),b.Qb(1,"ion-card"),b.Qb(2,"ion-card-header",3),b.Qb(3,"p"),b.uc(4),b.bc(5,"translate"),b.Pb(),b.Pb(),b.Qb(6,"ion-card-content",3),b.Qb(7,"ion-button",4),b.Yb("click",(function(){return b.nc(t),b.ac().showModal()})),b.uc(8),b.bc(9,"translate"),b.Pb(),b.Pb(),b.Pb(),b.Pb()}2&t&&(b.zb(4),b.wc(" ",b.cc(5,2,"myAccount.SignIn")," "),b.zb(4),b.wc("",b.cc(9,4,"myAccount.SignInOrRegister")," "))}function p(t,n){if(1&t){const t=b.Rb();b.Qb(0,"div"),b.Qb(1,"ion-list",5),b.Qb(2,"ion-item",6),b.Yb("click",(function(){return b.nc(t),b.ac().UserInfoPage()})),b.Qb(3,"ion-avatar",7),b.Lb(4,"img",8),b.Pb(),b.Qb(5,"ion-label",9),b.uc(6),b.Pb(),b.Pb(),b.Pb(),b.Qb(7,"ion-list",5),b.Qb(8,"ion-list-header"),b.Qb(9,"ion-label"),b.Qb(10,"span"),b.uc(11),b.bc(12,"translate"),b.Pb(),b.Qb(13,"a",10),b.Yb("click",(function(){return b.nc(t),b.ac().readCommandList("All")})),b.uc(14),b.bc(15,"translate"),b.Pb(),b.Pb(),b.Pb(),b.Qb(16,"ion-item",11),b.Yb("click",(function(){return b.nc(t),b.ac().readCommandList("OrderStatus_Progressing")})),b.uc(17),b.bc(18,"translate"),b.Pb(),b.Qb(19,"ion-item",11),b.Yb("click",(function(){return b.nc(t),b.ac().readCommandList("OrderStatus_Valid")})),b.uc(20),b.bc(21,"translate"),b.Pb(),b.Qb(22,"ion-item",11),b.Yb("click",(function(){return b.nc(t),b.ac().readCommandList("OrderStatus_Refus")})),b.uc(23),b.bc(24,"translate"),b.Pb(),b.Pb(),b.Qb(25,"ion-list",5),b.Qb(26,"ion-item",12),b.Yb("click",(function(){return b.nc(t),b.ac().translation()})),b.Lb(27,"ion-icon",13),b.uc(28),b.bc(29,"translate"),b.Pb(),b.Qb(30,"ion-item",11),b.Yb("click",(function(){return b.nc(t),b.ac().myAvis()})),b.Lb(31,"ion-icon",14),b.uc(32),b.bc(33,"translate"),b.Pb(),b.Qb(34,"ion-item",11),b.Yb("click",(function(){return b.nc(t),b.ac().contactUs()})),b.Lb(35,"ion-icon",15),b.uc(36),b.bc(37,"translate"),b.Pb(),b.Qb(38,"ion-item",11),b.Yb("click",(function(){return b.nc(t),b.ac().aboutUs()})),b.Lb(39,"ion-icon",16),b.uc(40),b.bc(41,"translate"),b.Pb(),b.Pb(),b.Qb(42,"ion-list",5),b.Qb(43,"ion-button",17),b.Yb("click",(function(){return b.nc(t),b.ac().logout()})),b.uc(44),b.bc(45,"translate"),b.Pb(),b.Pb(),b.Pb()}if(2&t){const t=b.ac();b.zb(6),b.wc(" ",t.username," "),b.zb(5),b.wc(" ",b.cc(12,11,"myAccount.MyOrder")," "),b.zb(3),b.wc("",b.cc(15,13,"myAccount.ViewAll")," "),b.zb(3),b.vc(b.cc(18,15,"myAccount.PrepareOrder")),b.zb(3),b.vc(b.cc(21,17,"myAccount.OrderArrived")),b.zb(3),b.vc(b.cc(24,19,"myAccount.CanceledOrder")),b.zb(5),b.wc(" ",b.cc(29,21,"translation.Title")," "),b.zb(4),b.wc(" ",b.cc(33,23,"myAccount.Feedbacks")," "),b.zb(4),b.wc(" ",b.cc(37,25,"myAccount.ContactUs")," "),b.zb(4),b.wc(" ",b.cc(41,27,"myAccount.AboutUs")," "),b.zb(4),b.wc(" ",b.cc(45,29,"myAccount.SignOut")," ")}}const w=[{path:"",component:(()=>{class t extends r.a{constructor(t,n,e,i,o,s,a){super(),this.navCtrl=t,this.modalCtrl=n,this.storage=e,this.utils=i,this.rest=o,this.toastCtrl=s,this.translateService=a,this.notLogin=!0,this.logined=!1,this.username=""}ngOnInit(){}showModal(){return Object(c.a)(this,void 0,void 0,(function*(){let t=yield this.modalCtrl.create({component:P});t.present(),t.onWillDismiss().then(()=>{this.loadUserPage()})}))}ionViewDidEnter(){return Object(c.a)(this,void 0,void 0,(function*(){yield this.loadUserPage()}))}contactUs(){this.navCtrl.navigateForward("ContactUsPage",{queryParams:{Page:"MyAccountPage"}})}aboutUs(){this.navCtrl.navigateForward("AboutUsPage")}loadUserPage(){var t=localStorage.getItem("jwt");null==localStorage.getItem("userId")||null==t?(this.notLogin=!0,this.logined=!1):(this.notLogin=!1,this.logined=!0,this.username=localStorage.getItem("username")),this.logined&&this.loadNotReadMessage()}logout(){localStorage.clear(),this.storage.remove("userId"),this.storage.remove("jwt"),this.storage.remove("refreshToken"),this.rest.logout(),this.loadUserPage()}loadNotReadMessage(){}readCommandList(t){this.navCtrl.navigateForward("ReadOrderListPage",{queryParams:{orderType:t}})}translation(){return Object(c.a)(this,void 0,void 0,(function*(){(yield this.modalCtrl.create({component:l.a})).present()}))}UserInfoPage(){this.navCtrl.navigateForward("UserInfoPage")}myAvis(){this.navCtrl.navigateForward("ProductEvaluationListPage")}}return t.\u0275fac=function(n){return new(n||t)(b.Kb(s.ab),b.Kb(s.Z),b.Kb(d.b),b.Kb(h.a),b.Kb(u.a),b.Kb(s.fb),b.Kb(m.d))},t.\u0275cmp=b.Eb({type:t,selectors:[["app-my-account"]],features:[b.wb],decls:10,vars:5,consts:[["slot","start"],["text-center",""],[4,"ngIf"],[1,"ion-text-center"],["size","small","fill","outline",3,"click"],[1,"ion-margin-top"],["ion-item","",3,"click"],["slot","start","item-start",""],["src","assets/imgs/logo-512.png"],[2,"font-size","1.5em"],[1,"viewAll",3,"click"],["button","","detail","true","ion-item","",3,"click"],["button","","detail","true",3,"click"],["name","globe","item-start","","slot","start",1,"iconStyle"],["name","at","slot","start","item-start","",1,"iconStyle"],["name","mail","item-start","","slot","start",1,"iconStyle"],["name","information-circle","item-start","","slot","start",1,"iconStyle"],["Expand","full","full","","color","danger",1,"ion-text-center","ion-no-margin",3,"click"]],template:function(t,n){1&t&&(b.Qb(0,"ion-header"),b.Qb(1,"ion-toolbar"),b.Qb(2,"ion-buttons",0),b.Lb(3,"ion-back-button"),b.Pb(),b.Qb(4,"ion-title",1),b.uc(5),b.bc(6,"translate"),b.Pb(),b.Pb(),b.Pb(),b.Qb(7,"ion-content"),b.tc(8,f,10,6,"div",2),b.tc(9,p,46,31,"div",2),b.Pb()),2&t&&(b.zb(5),b.vc(b.cc(6,3,"myAccount.Title")),b.zb(3),b.gc("ngIf",n.notLogin),b.zb(1),b.gc("ngIf",n.logined))},directives:[s.t,s.V,s.i,s.e,s.f,s.U,s.q,i.k,s.j,s.l,s.k,s.h,s.B,s.z,s.d,s.A,s.C,s.u],pipes:[m.c],styles:[".card[_ngcontent-%COMP%]{margin:0;width:100%}.AccountDetail[_ngcontent-%COMP%]{padding:10px}.viewAll[_ngcontent-%COMP%]{float:right;-webkit-text-decoration-line:none;text-decoration-line:none;font-size:.7em;margin-right:10px}.iconStyle[_ngcontent-%COMP%]{color:#717275}ion-card[_ngcontent-%COMP%]{margin:0;width:100%}"]}),t})()}];let v=(()=>{class t{}return t.\u0275mod=b.Ib({type:t}),t.\u0275inj=b.Hb({factory:function(n){return new(n||t)},imports:[[a.i.forChild(w)],a.i]}),t})();const k=[{path:"",component:P}];let y=(()=>{class t{}return t.\u0275mod=b.Ib({type:t}),t.\u0275inj=b.Hb({factory:function(n){return new(n||t)},imports:[[a.i.forChild(k)],a.i]}),t})(),Q=(()=>{class t{}return t.\u0275mod=b.Ib({type:t}),t.\u0275inj=b.Hb({factory:function(n){return new(n||t)},imports:[[i.b,o.e,s.W,y,m.b]]}),t})(),C=(()=>{class t{}return t.\u0275mod=b.Ib({type:t}),t.\u0275inj=b.Hb({factory:function(n){return new(n||t)},imports:[[i.b,o.e,s.W,v,m.b,Q]]}),t})()}}]);