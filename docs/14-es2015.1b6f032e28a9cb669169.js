(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{v35Q:function(t,n,i){"use strict";i.r(n),i.d(n,"CartPageModule",(function(){return S}));var e=i("ofXK"),c=i("3Pt+"),o=i("TEn/"),r=i("tyNb"),s=i("mrSG"),a=i("n3qt"),u=i("AytR"),l=i("fXoL"),b=i("x7k0"),d=i("e8h1"),h=i("kwrG"),g=i("MDGB"),m=i("sYmb");const p=["input"];let f=(()=>{class t{constructor(){this.onUpdate=new l.n,this.buyNumber=1,this.goods="",this.minQty=0,this.disabled=!1,this.minus=!0,this.add=!1}ngOnInit(){}onInput(t){if(t.stopPropagation(),this.input.nativeElement.value=this.buyNumber,this.maxQty&&Number(this.buyNumber)>=this.maxQty)return this.add=!0,this.maxQty>this.minQty&&(this.minus=!1),this.buyNumber=this.maxQty,this.onEvent(),void(this.input.nativeElement.value=this.buyNumber);this.minus=!(this.buyNumber&&this.buyNumber>this.minQty),this.onEvent()}onMinus(t){t.stopPropagation(),this.buyNumber&&this.buyNumber>this.minQty&&(this.buyNumber--,this.buyNumber==this.minQty&&(this.minus=!0),this.maxQty&&this.buyNumber<this.maxQty&&(this.add=!1),this.onEvent())}onAdd(t){t.stopPropagation(),this.maxQty&&this.buyNumber>=this.maxQty?this.add=!0:(this.buyNumber++,this.onEvent(),this.minus=!1)}onEvent(){this.onUpdate.emit({number:this.buyNumber,goods:this.goods})}onMyInput(t){t.stopPropagation()}ngOnChanges(){this.maxQty=Number(this.maxQty),this.buyNumber=Number(this.buyNumber),this.buyNumber>this.minQty&&(this.minus=!1),this.maxQty&&this.buyNumber>=this.maxQty&&(this.add=!0)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=l.Eb({type:t,selectors:[["app-ion-meter"]],viewQuery:function(t,n){var i;1&t&&l.zc(p,!0),2&t&&l.lc(i=l.Zb())&&(n.input=i.first)},inputs:{buyNumber:"buyNumber",goods:"goods",maxQty:"maxQty",minQty:"minQty"},outputs:{onUpdate:"onUpdate"},features:[l.xb],decls:10,vars:4,consts:[["size","3","col-2",""],["fill","clear",3,"disabled","click"],["name","remove-circle","color","primary"],["size","6","col-4",""],["type","number","pattern","[0-9]*",3,"ngModel","disabled","ngModelChange","input","click"],["input",""],["size","3","col-2","","text-right",""],["ion-button","","fill","clear",3,"disabled","click"],["name","add-circle","color","primary"]],template:function(t,n){1&t&&(l.Qb(0,"ion-row"),l.Qb(1,"ion-col",0),l.Qb(2,"ion-button",1),l.Yb("click",(function(t){return n.onMinus(t)})),l.Lb(3,"ion-icon",2),l.Pb(),l.Pb(),l.Qb(4,"ion-col",3),l.Qb(5,"input",4,5),l.Yb("ngModelChange",(function(t){return n.buyNumber=t}))("input",(function(t){return n.onInput(t)}))("click",(function(t){return n.onMyInput(t)})),l.Pb(),l.Pb(),l.Qb(7,"ion-col",6),l.Qb(8,"ion-button",7),l.Yb("click",(function(t){return n.onAdd(t)})),l.Lb(9,"ion-icon",8),l.Pb(),l.Pb(),l.Pb()),2&t&&(l.zb(2),l.gc("disabled",n.minus||n.disabled),l.zb(3),l.gc("ngModel",n.buyNumber)("disabled",n.disabled),l.zb(3),l.gc("disabled",n.add||n.disabled))},directives:[o.H,o.p,o.h,o.u,c.m,c.a,c.n,c.i,c.l],styles:["p[_ngcontent-%COMP%]{height:30px;line-height:30px;font-size:1.2rem;margin:0}input[_ngcontent-%COMP%]{width:100%;height:100%;font-size:1.8rem;text-align:center;cursor:pointer;border-width:0;outline:none;background:var(--ion-card-background)}.button[_ngcontent-%COMP%]{height:inherit;margin:0;padding:0}ion-icon[_ngcontent-%COMP%]{font-size:1.6em}"]}),t})();function P(t,n){1&t&&(l.Qb(0,"span"),l.uc(1,"0"),l.Pb())}function y(t,n){if(1&t&&(l.Qb(0,"span"),l.uc(1),l.Pb()),2&t){const t=l.ac();l.zb(1),l.vc(t.cartProductList.length)}}function Q(t,n){if(1&t&&l.Lb(0,"img",22),2&t){const t=l.ac().$implicit,n=l.ac(2);l.gc("src",n.host+t.DefaultPhotoPath,l.oc)}}function v(t,n){1&t&&l.Lb(0,"img",23)}function x(t,n){1&t&&(l.Qb(0,"span"),l.uc(1,"\u20ac"),l.Pb())}function C(t,n){if(1&t&&(l.Qb(0,"p",24),l.uc(1),l.tc(2,x,2,0,"span",0),l.Pb()),2&t){const t=l.ac().$implicit;l.zb(1),l.vc(t.Price),l.zb(1),l.gc("ngIf",null!=t.Price)}}function k(t,n){if(1&t){const t=l.Rb();l.Qb(0,"div",8),l.Qb(1,"ion-grid",9),l.Qb(2,"ion-row",9),l.Qb(3,"ion-col",10),l.Qb(4,"ion-checkbox",11),l.Yb("ngModelChange",(function(i){return l.nc(t),n.$implicit.Selected=i}))("ngModelChange",(function(){l.nc(t);const i=n.$implicit;return l.ac(2).itemCheckBoxChange(i)})),l.Pb(),l.Pb(),l.Qb(5,"ion-col",12),l.tc(6,Q,1,1,"img",13),l.tc(7,v,1,0,"img",14),l.Pb(),l.Qb(8,"ion-col",15),l.Qb(9,"div"),l.tc(10,C,3,2,"p",16),l.Qb(11,"h6",17),l.Yb("click",(function(){l.nc(t);const i=n.$implicit;return l.ac(2).viewProductDetail(i.ProductId)})),l.uc(12),l.Pb(),l.Qb(13,"p",18),l.uc(14),l.bc(15,"translate"),l.Pb(),l.Qb(16,"ion-button",19),l.Yb("click",(function(){l.nc(t);const i=n.$implicit;return l.ac(2).removeItem(i)})),l.Lb(17,"ion-icon",20),l.Pb(),l.Qb(18,"p",18),l.uc(19),l.bc(20,"translate"),l.Pb(),l.Qb(21,"p",18),l.uc(22),l.bc(23,"translate"),l.Pb(),l.Pb(),l.Qb(24,"app-ion-meter",21),l.Yb("onUpdate",(function(i){l.nc(t);const e=n.$implicit;return l.ac(2).onUpdate(i,e.MinQuantity)})),l.Pb(),l.Pb(),l.Pb(),l.Pb(),l.Pb()}if(2&t){const t=n.$implicit,i=l.ac(2);l.zb(4),l.gc("ngModel",t.Selected),l.zb(2),l.gc("ngIf",null!=t.DefaultPhotoPath),l.zb(1),l.gc("ngIf",null==t.DefaultPhotoPath),l.zb(3),l.gc("ngIf",i.logined),l.zb(2),l.wc(" ",t.Label," "),l.zb(2),l.xc("",l.cc(15,14,"cart.Reference"),": ",t.Code," "),l.zb(5),l.xc("",l.cc(20,16,"cart.EachBox"),": ",t.QuantityPerBox," "),l.zb(3),l.xc("",l.cc(23,18,"cart.MinimumPurchase"),":",t.MinQuantity,""),l.zb(2),l.gc("buyNumber",i.checkQuantityWithMinQuantity(t.MinQuantity,t.Quantity))("minQty",t.MinQuantity)("goods",t.ReferenceId)}}function z(t,n){if(1&t&&(l.Qb(0,"ion-list"),l.tc(1,k,25,20,"div",7),l.Pb()),2&t){const t=l.ac();l.zb(1),l.gc("ngForOf",t.cartProductList)}}function I(t,n){1&t&&(l.Qb(0,"div"),l.Lb(1,"img",25),l.Qb(2,"h1",26),l.uc(3),l.bc(4,"translate"),l.Pb(),l.Pb()),2&t&&(l.zb(3),l.wc(" ",l.cc(4,1,"cart.YourCartIsEmpty"),""))}function L(t,n){if(1&t&&(l.Qb(0,"ion-label"),l.uc(1),l.bc(2,"translate"),l.bc(3,"number"),l.Pb()),2&t){const t=l.ac();l.zb(1),l.xc("",l.cc(2,2,"cart.Somme"),":",l.dc(3,4,t.CalculAccount(),"1.2-2"),"\u20ac")}}const M=[{path:"",component:(()=>{class t extends a.a{constructor(t,n,i,e,c,o,r){super(),this.navCtrl=t,this.utils=n,this.storage=i,this.network=e,this.rest=c,this.toastCtrl=o,this.translateService=r,this.logined=!1,this.cartProductList=[],this.checkAllProduct=!1,this.host=u.a.SERVER_API_URL}ngOnInit(){}checkLogined(){return Object(s.a)(this,void 0,void 0,(function*(){this.logined=yield this.utils.checkIsLogined()}))}ionViewDidEnter(){return Object(s.a)(this,void 0,void 0,(function*(){yield this.checkLogined(),this.cartProductList=JSON.parse(yield this.utils.getKey("cartProductList")),null!=this.cartProductList&&this.cartProductList.length>0&&this.cartProductList.map(t=>{t.Quantity<t.MinQuantity&&(t.Quantity=t.MinQuantity)})}))}viewProductDetail(t){this.navCtrl.navigateForward("ProductDetailPage",{queryParams:{productId:t}})}itemCheckBoxChange(t){0==t.Selected&&(this.checkAllProduct=!1),this.SaveCart()}checkQuantityWithMinQuantity(t,n){return null!=t&&null!=n?n>t?n:t:0}onUpdate(t,n){"number"==typeof t.number&&(this.cartProductList.forEach(i=>{i.ReferenceId==t.goods&&(i.Quantity=t.number>n?t.number:n)}),this.SaveCart())}valideCart(){const t=Object.create(null,{showToast:{get:()=>super.showToast}});return Object(s.a)(this,void 0,void 0,(function*(){if(this.logined){var n=this.GetSelectedProduct(),i=[];n.map(t=>i.push({ReferenceId:t.ReferenceId,Quantity:t.Quantity})),this.navCtrl.navigateForward("OrderConfirmationPage",{queryParams:{References:JSON.stringify(i)}})}else t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_NotConnected"))}))}AllCheckBoxChange(){this.cartProductList.forEach(1==this.checkAllProduct?t=>{t.Selected=!0}:t=>{t.Selected=!1})}removeItem(t){this.cartProductList=this.cartProductList.filter(n=>n.ReferenceId!=t.ReferenceId),this.SaveCart()}SaveCart(){this.storage.set("cartProductList",JSON.stringify(this.cartProductList))}GetSelectedProduct(){return null!=this.cartProductList&&this.cartProductList.length>0?this.cartProductList.filter(t=>1==t.Selected):[]}CalculAccount(){var t=0;return this.GetSelectedProduct().forEach(n=>{t+=n.Quantity*n.Price}),t}checkProductListIsAvailable(){return null!=this.cartProductList&&this.cartProductList.length>0}checkSelectedProductListIsEmpty(){return this.GetSelectedProduct(),this.GetSelectedProduct().length>0}}return t.\u0275fac=function(n){return new(n||t)(l.Kb(o.ab),l.Kb(b.a),l.Kb(d.b),l.Kb(h.a),l.Kb(g.a),l.Kb(o.fb),l.Kb(m.d))},t.\u0275cmp=l.Eb({type:t,selectors:[["app-cart"]],features:[l.wb],decls:23,vars:17,consts:[[4,"ngIf"],[2,"padding-bottom","0px"],["float-left","",1,"footerComponent","ion-float-left",2,"margin-left","5px","margin-top","6px"],["name","AllProduct",3,"disabled","ngModel","ngModelChange"],[2,"margin-left","3px"],[1,"footerComponent","ion-float-right"],["shape","round","size","small","round","","small","",3,"disabled","click"],["class","productCard",4,"ngFor","ngForOf"],[1,"productCard"],[1,"colStyle"],["size","1","col-1","",1,"align-text-middle","ion-no-padding"],[3,"ngModel","ngModelChange"],["size","3","col-3","",1,"colStyle"],["class","align-text-middle",3,"src",4,"ngIf"],["src","assets/imgs/not-found.png",4,"ngIf"],["size","8","col-8","",1,"colStyle"],["style","float: right; margin-right: 4px; margin-bottom: 0px;",4,"ngIf"],[1,"productTitleFont",3,"click"],[1,"descriptionFont"],["icon-only","","float-right","",1,"ion-float-right",2,"font-size","0.6em","clear","both","height","3em",3,"click"],["name","close","slot","icon-only"],["float-right","","maxQty","10000",1,"ion-float-right",3,"buyNumber","minQty","goods","onUpdate"],[1,"align-text-middle",3,"src"],["src","assets/imgs/not-found.png"],[2,"float","right","margin-right","4px","margin-bottom","0px"],["src","assets/imgs/empty_cart.png",2,"margin-top","5px"],[2,"text-align","center","color","gray"]],template:function(t,n){1&t&&(l.Qb(0,"ion-header"),l.Qb(1,"ion-toolbar"),l.Qb(2,"ion-title"),l.uc(3),l.bc(4,"translate"),l.tc(5,P,2,0,"span",0),l.tc(6,y,2,1,"span",0),l.uc(7," )"),l.Pb(),l.Pb(),l.Pb(),l.Qb(8,"ion-content"),l.tc(9,z,2,1,"ion-list",0),l.tc(10,I,5,3,"div",0),l.Pb(),l.Qb(11,"ion-footer"),l.Qb(12,"ion-toolbar",1),l.Qb(13,"div",2),l.Qb(14,"ion-checkbox",3),l.Yb("ngModelChange",(function(t){return n.checkAllProduct=t}))("ngModelChange",(function(){return n.AllCheckBoxChange()})),l.Pb(),l.Qb(15,"ion-label",4),l.uc(16),l.bc(17,"translate"),l.Pb(),l.Pb(),l.Qb(18,"div",5),l.tc(19,L,4,7,"ion-label",0),l.Qb(20,"ion-button",6),l.Yb("click",(function(){return n.valideCart()})),l.uc(21),l.bc(22,"translate"),l.Pb(),l.Pb(),l.Pb(),l.Pb()),2&t&&(l.zb(3),l.wc("",l.cc(4,11,"cart.Title"),"( "),l.zb(2),l.gc("ngIf",null==n.cartProductList),l.zb(1),l.gc("ngIf",null!=n.cartProductList),l.zb(3),l.gc("ngIf",n.checkProductListIsAvailable()),l.zb(1),l.gc("ngIf",!n.checkProductListIsAvailable()),l.zb(4),l.gc("disabled",!n.checkProductListIsAvailable())("ngModel",n.checkAllProduct),l.zb(2),l.vc(l.cc(17,13,"cart.All")),l.zb(3),l.gc("ngIf",n.logined),l.zb(1),l.gc("disabled",!n.checkProductListIsAvailable()||!n.checkSelectedProductListIsEmpty()),l.zb(1),l.vc(l.cc(22,15,"cart.Confirm")))},directives:[o.t,o.V,o.U,e.k,o.q,o.r,o.o,o.b,c.i,c.l,o.A,o.h,o.B,e.j,o.s,o.H,o.p,o.u,f],pipes:[m.c,e.d],styles:[".align-text-middle[_ngcontent-%COMP%], .footerComponent[_ngcontent-%COMP%]{display:flex;align-items:center}.productCard[_ngcontent-%COMP%]{border-bottom:.5px solid;border-color:#a9a9a9}.productTitleFont[_ngcontent-%COMP%]{font-size:1.2rem;margin:0;text-decoration:underline}.descriptionFont[_ngcontent-%COMP%]{font-size:1rem;margin:2px 0}.colStyle[_ngcontent-%COMP%]{padding:5px 5px 0}"]}),t})()}];let N=(()=>{class t{}return t.\u0275mod=l.Ib({type:t}),t.\u0275inj=l.Hb({factory:function(n){return new(n||t)},imports:[[r.i.forChild(M)],r.i]}),t})(),w=(()=>{class t{}return t.\u0275mod=l.Ib({type:t}),t.\u0275inj=l.Hb({factory:function(n){return new(n||t)},imports:[[o.W,e.b,c.e]]}),t})(),S=(()=>{class t{}return t.\u0275mod=l.Ib({type:t}),t.\u0275inj=l.Hb({factory:function(n){return new(n||t)},imports:[[e.b,c.e,o.W,N,m.b,w]]}),t})()}}]);