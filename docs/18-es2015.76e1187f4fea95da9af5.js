(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"h+oH":function(t,e,r){"use strict";r.r(e),r.d(e,"ModifyUserInfoPageModule",(function(){return Q}));var i=r("ofXK"),s=r("3Pt+"),n=r("TEn/"),o=r("tyNb"),a=r("mrSG"),c=r("n3qt"),d=r("fXoL"),l=r("kwrG"),u=r("MDGB"),b=r("sYmb"),p=r("kmnG"),h=r("qFsG");function f(t,e){if(1&t&&(d.Qb(0,"ion-card-content",22),d.Qb(1,"p",23),d.uc(2),d.Qb(3,"span"),d.uc(4),d.Pb(),d.Pb(),d.Qb(5,"p",23),d.uc(6),d.Pb(),d.Qb(7,"p",23),d.uc(8),d.Pb(),d.Qb(9,"p",23),d.uc(10),d.Qb(11,"span"),d.uc(12),d.Pb(),d.Pb(),d.Qb(13,"p",23),d.uc(14),d.Pb(),d.Pb()),2&t){const t=d.ac();d.zb(2),d.wc("",t.defaultShippingAdress.ContactFirstName," "),d.zb(2),d.wc(" ",t.defaultShippingAdress.ContactLastName,""),d.zb(2),d.wc("",t.defaultShippingAdress.FirstLineAddress," "),d.zb(2),d.wc("",t.defaultShippingAdress.SecondLineAddress," "),d.zb(2),d.wc("",t.defaultShippingAdress.ZipCode," "),d.zb(2),d.wc(" ",t.defaultShippingAdress.City," "),d.zb(2),d.wc("",t.defaultShippingAdress.ContactTelephone," ")}}function m(t,e){1&t&&(d.Qb(0,"ion-card-content",26),d.Qb(1,"p",27),d.uc(2),d.bc(3,"translate"),d.Pb(),d.Pb()),2&t&&(d.zb(2),d.vc(d.cc(3,1,"NoDataToDisplay")))}function g(t,e){if(1&t){const t=d.Rb();d.Qb(0,"ion-button",28),d.Yb("click",(function(){return d.nc(t),d.ac().selectShippingAdress()})),d.uc(1),d.bc(2,"translate"),d.Pb()}2&t&&(d.zb(1),d.vc(d.cc(2,1,"order-confirmation.ChooseAnotherAddress")))}function P(t,e){if(1&t){const t=d.Rb();d.Qb(0,"ion-button",29),d.Yb("click",(function(){return d.nc(t),d.ac().selectShippingAdress()})),d.uc(1),d.bc(2,"translate"),d.Pb()}2&t&&(d.zb(1),d.vc(d.cc(2,1,"Add")))}const A=[{path:"",component:(()=>{class t extends c.a{constructor(t,e,r,i,n,o,a,c){super(),this.navCtrl=t,this.formBuilder=e,this.toastCtrl=r,this.loadingCtrl=i,this.network=n,this.rest=o,this.translateService=a,this.router=c,this.facturationAdress={},this.defaultShippingAdress={},this.UserInfo={},this.userForm=this.formBuilder.group({EntrepriseName:["",s.q.required],Siret:["",s.q.required],PhoneNumber:["",s.q.required]})}ionViewWillEnter(){this.defaultShippingAdress=null!=this.router.snapshot.queryParams.tempSelectedAdress?JSON.parse(this.router.snapshot.queryParams.tempSelectedAdress):this.defaultShippingAdress,this.facturationAdress=null!=this.router.snapshot.queryParams.facturationAdress?JSON.parse(this.router.snapshot.queryParams.facturationAdress):this.facturationAdress}ngOnInit(){var t=this.router.snapshot.queryParams.UserInfo;this.UserInfo=null!=t?JSON.parse(t):{},this.userForm.patchValue({EntrepriseName:this.UserInfo.EntrepriseName,Siret:this.UserInfo.Siret,PhoneNumber:this.UserInfo.PhoneNumber}),null!=this.UserInfo.FacturationAdress&&(this.facturationAdress=this.UserInfo.FacturationAdress),null!=this.UserInfo.ShippingAdress&&this.UserInfo.ShippingAdress.length>0&&(this.defaultShippingAdress=this.UserInfo.ShippingAdress.find(t=>1==t.IsDefaultAdress),this.defaultShippingAdress=null==this.defaultShippingAdress?this.UserInfo.ShippingAdress[0]:this.defaultShippingAdress)}modifyFacturationAdress(t){this.navCtrl.navigateForward("AddAdressPage",{queryParams:{type:"facturationAdress",adress:JSON.stringify(t),currentPage:"ModifyUserInfoPage"}})}selectShippingAdress(){this.navCtrl.navigateForward("SelectShippingAdressPage",{queryParams:{CurrentAddressId:null!=this.defaultShippingAdress?this.defaultShippingAdress.Id:null,CurrentPage:"ModifyUserInfoPage"}})}saveUserInfo(){const t=Object.create(null,{showLoading:{get:()=>super.showLoading},showToast:{get:()=>super.showToast}});return Object(a.a)(this,void 0,void 0,(function*(){for(let t in this.userForm.controls)this.userForm.controls[t].markAsTouched();if(!this.userForm.invalid)if("none"!=this.network.type){console.log(this.userForm.value);var e=this.userForm.value;e.UserId=localStorage.getItem("userId"),e.DefaultShippingAddressId=null!=this.defaultShippingAdress?this.defaultShippingAdress.Id:0;var r=yield t.showLoading.call(this,this.loadingCtrl,this.translateService.instant("Loading"));this.rest.UpdateUserInfo(e).subscribe(e=>{null!=e&&e>0&&(this.UserInfo.EntrepriseName=this.userForm.value.EntrepriseName,this.UserInfo.Siret=this.userForm.value.Siret,this.UserInfo.PhoneNumber=this.userForm.value.PhoneNumber,this.UserInfo.FacturationAdress=this.facturationAdress,t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_SaveSuccess"))),r.dismiss()},e=>{t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Error")),r.dismiss()})}else t.showToast.call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"))}))}}return t.\u0275fac=function(e){return new(e||t)(d.Kb(n.ab),d.Kb(s.b),d.Kb(n.fb),d.Kb(n.Y),d.Kb(l.a),d.Kb(u.a),d.Kb(b.d),d.Kb(o.a))},t.\u0275cmp=d.Eb({type:t,selectors:[["app-modify-user-info"]],features:[d.wb],decls:62,vars:36,consts:[["slot","start"],[2,"margin","0px","width","100%"],[2,"padding-bottom","3px"],[1,"example-form",3,"formGroup"],[1,"example-full-width"],["required","","matInput","","formControlName","EntrepriseName",3,"placeholder"],["required","","type","tel","matInput","","formControlName","Siret",3,"placeholder"],["matPrefix",""],["required","","type","tel","matInput","","formControlName","PhoneNumber",3,"placeholder"],[2,"padding","8px"],[2,"margin-bottom","0px"],[1,"productCard",2,"width","100%","border-bottom","0px"],[2,"padding","8px 4px 0px"],[1,"productTitle","ion-no-margin"],["style","padding: 0px; ",4,"ngIf"],["style","padding-left: 8px;",4,"ngIf"],["text-center","",1,"ion-text-center"],["size","small","color","primary","fill","outline",3,"click",4,"ngIf"],["ion-button","","size","small","color","primary","fill","outline",3,"click",4,"ngIf"],[2,"padding","8px","margin-bottom","20px"],[1,"productTitle",2,"padding","8px 4px 0px"],["float-right","",1,"articleNumber","ion-float-right",3,"click"],[2,"padding","0px"],[1,"descriptionFont"],[1,"ion-text-center"],["Expand","full","color","primary",1,"ion-no-margin",2,"width","100%","height","35px",3,"click"],[2,"padding-left","8px"],["text-center","",1,"descriptionFont"],["size","small","color","primary","fill","outline",3,"click"],["ion-button","","size","small","color","primary","fill","outline",3,"click"]],template:function(t,e){1&t&&(d.Qb(0,"ion-header"),d.Qb(1,"ion-toolbar"),d.Qb(2,"ion-buttons",0),d.Lb(3,"ion-back-button"),d.Pb(),d.Qb(4,"ion-title"),d.uc(5),d.bc(6,"translate"),d.Pb(),d.Pb(),d.Pb(),d.Qb(7,"ion-content"),d.Qb(8,"ion-card",1),d.Qb(9,"ion-card-content",2),d.Qb(10,"form",3),d.Qb(11,"mat-form-field",4),d.Lb(12,"input",5),d.bc(13,"translate"),d.Pb(),d.Qb(14,"mat-form-field",4),d.Lb(15,"input",6),d.bc(16,"translate"),d.Pb(),d.Qb(17,"mat-form-field",4),d.Qb(18,"span",7),d.uc(19,"+33 \xa0"),d.Pb(),d.Lb(20,"input",8),d.bc(21,"translate"),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(22,"div",9),d.Qb(23,"ion-list",10),d.Qb(24,"ion-card",11),d.Qb(25,"ion-card-header",12),d.Qb(26,"h3",13),d.uc(27),d.bc(28,"translate"),d.Pb(),d.Pb(),d.tc(29,f,15,7,"ion-card-content",14),d.tc(30,m,4,3,"ion-card-content",15),d.Pb(),d.Qb(31,"div",16),d.tc(32,g,3,3,"ion-button",17),d.tc(33,P,3,3,"ion-button",18),d.Pb(),d.Pb(),d.Pb(),d.Qb(34,"div",19),d.Qb(35,"ion-card",11),d.Qb(36,"ion-card-header",20),d.Qb(37,"h3",13),d.uc(38),d.bc(39,"translate"),d.Qb(40,"a",21),d.Yb("click",(function(){return e.modifyFacturationAdress(e.facturationAdress)})),d.uc(41),d.bc(42,"translate"),d.Pb(),d.Pb(),d.Pb(),d.Qb(43,"ion-card-content",22),d.Qb(44,"p",23),d.uc(45),d.Qb(46,"span"),d.uc(47),d.Pb(),d.Pb(),d.Qb(48,"p",23),d.uc(49),d.Pb(),d.Qb(50,"p",23),d.uc(51),d.Pb(),d.Qb(52,"p",23),d.uc(53),d.Qb(54,"span"),d.uc(55),d.Pb(),d.Pb(),d.Qb(56,"p",23),d.uc(57),d.Pb(),d.Pb(),d.Pb(),d.Pb(),d.Qb(58,"div",24),d.Qb(59,"ion-button",25),d.Yb("click",(function(){return e.saveUserInfo()})),d.uc(60),d.bc(61,"translate"),d.Pb(),d.Pb(),d.Pb()),2&t&&(d.zb(5),d.vc(d.cc(6,20,"modify-user-info.modifyUserInfo")),d.zb(5),d.gc("formGroup",e.userForm),d.zb(2),d.hc("placeholder",d.cc(13,22,"add-adress.Entreprise")),d.zb(3),d.hc("placeholder",d.cc(16,24,"modify-user-info.Siret")),d.zb(5),d.hc("placeholder",d.cc(21,26,"add-adress.Telephone")),d.zb(7),d.vc(d.cc(28,28,"order-confirmation.ShippingAddress")),d.zb(2),d.gc("ngIf",null!=e.defaultShippingAdress),d.zb(1),d.gc("ngIf",null==e.defaultShippingAdress),d.zb(2),d.gc("ngIf",null!=e.defaultShippingAdress),d.zb(1),d.gc("ngIf",null==e.defaultShippingAdress),d.zb(5),d.wc("",d.cc(39,30,"order-confirmation.BillingAddress")," "),d.zb(3),d.vc(d.cc(42,32,"order-confirmation.Edit")),d.zb(4),d.wc("",e.facturationAdress.ContactFirstName," "),d.zb(2),d.wc(" ",e.facturationAdress.ContactLastName,""),d.zb(2),d.wc("",e.facturationAdress.FirstLineAddress," "),d.zb(2),d.wc("",e.facturationAdress.SecondLineAddress," "),d.zb(2),d.wc("",e.facturationAdress.ZipCode," "),d.zb(2),d.wc(" ",e.facturationAdress.City," "),d.zb(2),d.wc("",e.facturationAdress.ContactTelephone," "),d.zb(3),d.vc(d.cc(61,34,"add-adress.Enregistrer")))},directives:[n.t,n.V,n.i,n.e,n.f,n.U,n.q,n.j,n.k,s.r,s.j,s.d,p.c,h.a,s.a,s.p,s.i,s.c,p.g,n.B,n.l,i.k,n.h],pipes:[b.c],styles:[".articleNumber[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:500}.productCard[_ngcontent-%COMP%]{width:-webkit-fit-content;width:-moz-fit-content;width:fit-content;margin-left:0;margin-right:0;box-shadow:none!important;border-bottom:.5px solid #dedede;margin-top:0}.productTitle[_ngcontent-%COMP%]{font-weight:500;background-color:#f4f4f4;padding:3px;color:#000}.descriptionFont[_ngcontent-%COMP%]{margin:2px 0;color:var(--ion-color-warning-contrast)}.mat-form-field[_ngcontent-%COMP%]{display:inline}"]}),t})()}];let S=(()=>{class t{}return t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({factory:function(e){return new(e||t)},imports:[[o.i.forChild(A)],o.i]}),t})();var w=r("d3UM"),I=r("NFeN");let Q=(()=>{class t{}return t.\u0275mod=d.Ib({type:t}),t.\u0275inj=d.Hb({factory:function(e){return new(e||t)},imports:[[i.b,s.e,n.W,S,b.b,p.e,h.b,w.b,I.b,s.o]]}),t})()}}]);