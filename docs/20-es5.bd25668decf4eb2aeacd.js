!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}function r(t,e,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=s(t)););return t}(t,e);if(r){var a=Object.getOwnPropertyDescriptor(r,e);return a.get?a.get.call(n):a.value}})(t,e,n||t)}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}function o(t,e){return(o=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function i(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=s(t);if(e){var a=s(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{"K3/d":function(e,o,c){"use strict";c.r(o),c.d(o,"NewproductPageModule",(function(){return W}));var l=c("ofXK"),u=c("3Pt+"),b=c("TEn/"),d=c("tyNb"),p=c("mrSG"),g=c("n3qt"),h=c("AytR"),f=c("fXoL"),y=c("sYmb"),P=c("MDGB"),m=c("kwrG");function v(t,e){if(1&t&&(f.Qb(0,"ion-select-option",21),f.uc(1),f.Pb()),2&t){var n=e.$implicit;f.gc("value",n.Id),f.zb(1),f.vc(n.Label)}}function L(t,e){if(1&t&&(f.Qb(0,"ion-select-option",21),f.uc(1),f.Pb()),2&t){var n=e.$implicit;f.gc("value",n.Id),f.zb(1),f.wc("",n.Label," ")}}function C(t,e){if(1&t&&(f.Qb(0,"ion-select-option",21),f.uc(1),f.Pb()),2&t){var n=e.$implicit,r=f.ac();f.gc("value",n),f.zb(1),f.wc("",r.translateOrderByItem(n)," ")}}var w,S=((w=function(e){a(c,e);var o=i(c);function c(e,n,r,a,i,s){var l;return t(this,c),(l=o.call(this)).navCtrl=e,l.translateService=n,l.rest=r,l.network=a,l.toastCtrl=i,l.modalCtrl=s,l.criteria={SearchText:null,MainCategory:null,SecondCategory:null,PriceInterval:{lower:0,upper:200},MinQuantity:200,OrderBy:null},l.ReferenceList=[],l.MainCategoryList=[],l.OrderByList=["Price_Increase","Price_Decrease","PublishDate_Recent","Porpularity_More"],l}return n(c,[{key:"ngOnInit",value:function(){console.log("ionViewDidLoad AdvancedSearchPage"),this.criteria=this.criteriaPassed||this.criteria,this.loadMainCategoryAndSecondCategory()}},{key:"translateOrderByItem",value:function(t){return this.translateService.instant("advanced-search."+t)}},{key:"loadMainCategoryAndSecondCategory",value:function(){var t=this;"none"!=this.network.type?this.rest.GetReferenceItemsByCategoryLabels({ShortLabels:["MainCategory","SecondCategory"],Lang:this.translateService.defaultLang}).subscribe((function(e){null!=e&&e.length>0&&(t.ReferenceList=e,t.MainCategoryList=e.filter((function(t){return"MainCategory"==t.ReferenceCategoryLabel})))}),(function(e){r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translateService.instant("Msg_Error"))})):r(s(c.prototype),"showToast",this).call(this,this.toastCtrl,this.translateService.instant("Msg_Offline"))}},{key:"dismiss",value:function(){this.modalCtrl.dismiss()}},{key:"getSecondCategoryList",value:function(){var t=this;return null!=this.criteria.MainCategory?this.ReferenceList.filter((function(e){return e.ParentId==t.criteria.MainCategory})):[]}},{key:"search",value:function(){this.modalCtrl.dismiss(this.criteria)}}]),c}(g.a)).\u0275fac=function(t){return new(t||w)(f.Kb(b.ab),f.Kb(y.d),f.Kb(P.a),f.Kb(m.a),f.Kb(b.fb),f.Kb(b.Z))},w.\u0275cmp=f.Eb({type:w,selectors:[["app-advanced-search"]],inputs:{criteriaPassed:"criteriaPassed"},features:[f.wb],decls:66,vars:54,consts:[["slot","start"],[3,"click"],["ion-text","","color","primary","showWhen","ios"],["name","md-close","showWhen","android"],[2,"background-color","#fff!important"],[1,"headerZoom",2,"margin-left","10px","margin-right","2px"],["stacked",""],[1,"inputZoom",3,"ngModel","placeholder","ngModelChange"],[3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["multiple","true",3,"ngModel","ngModelChange"],["start","","slot","start"],["min","0","max","200","step","10",3,"ngModel","ngModelChange"],["range-left","","small","","name","cube"],["range-right","","name","cube"],["start","","position","stacked","slot","start"],["min","0","max","200","step","10","dualKnobs","true","pin","true",3,"ngModel","ngModelChange"],["range-left","","name","remove"],["range-right","","name","add"],["text-center",""],["color","primary",2,"width","100%","height","35px",3,"click"],[3,"value"]],template:function(t,e){1&t&&(f.Qb(0,"ion-header"),f.Qb(1,"ion-toolbar"),f.Qb(2,"ion-title"),f.uc(3),f.bc(4,"translate"),f.Pb(),f.Qb(5,"ion-buttons",0),f.Qb(6,"ion-button",1),f.Yb("click",(function(){return e.dismiss()})),f.Qb(7,"span",2),f.uc(8),f.bc(9,"translate"),f.Pb(),f.Lb(10,"ion-icon",3),f.Pb(),f.Pb(),f.Pb(),f.Pb(),f.Qb(11,"ion-content",4),f.Qb(12,"div",5),f.Qb(13,"h3"),f.uc(14),f.bc(15,"translate"),f.Pb(),f.Pb(),f.Qb(16,"ion-list"),f.Qb(17,"ion-item"),f.Qb(18,"ion-label",6),f.uc(19),f.bc(20,"translate"),f.Pb(),f.Qb(21,"ion-input",7),f.Yb("ngModelChange",(function(t){return e.criteria.SearchText=t})),f.bc(22,"translate"),f.Pb(),f.Pb(),f.Qb(23,"ion-item"),f.Qb(24,"ion-label"),f.uc(25),f.bc(26,"translate"),f.Pb(),f.Qb(27,"ion-select",8),f.Yb("ngModelChange",(function(t){return e.criteria.MainCategory=t})),f.tc(28,v,2,2,"ion-select-option",9),f.Pb(),f.Pb(),f.Qb(29,"ion-item"),f.Qb(30,"ion-label"),f.uc(31),f.bc(32,"translate"),f.Pb(),f.Qb(33,"ion-select",10),f.Yb("ngModelChange",(function(t){return e.criteria.SecondCategory=t})),f.tc(34,L,2,2,"ion-select-option",9),f.Pb(),f.Pb(),f.Qb(35,"ion-item"),f.Qb(36,"ion-label",11),f.uc(37),f.bc(38,"translate"),f.Pb(),f.Qb(39,"ion-range",12),f.Yb("ngModelChange",(function(t){return e.criteria.MinQuantity=t})),f.Lb(40,"ion-icon",13),f.Lb(41,"ion-icon",14),f.Pb(),f.Pb(),f.Qb(42,"ion-item"),f.Qb(43,"ion-label",15),f.uc(44),f.bc(45,"translate"),f.Pb(),f.Qb(46,"ion-range",16),f.Yb("ngModelChange",(function(t){return e.criteria.PriceInterval=t})),f.Lb(47,"ion-icon",17),f.Lb(48,"ion-icon",18),f.Pb(),f.Pb(),f.Pb(),f.Qb(49,"div",5),f.Qb(50,"h3"),f.uc(51),f.bc(52,"translate"),f.bc(53,"translate"),f.bc(54,"translate"),f.Pb(),f.Pb(),f.Qb(55,"ion-list"),f.Qb(56,"ion-item"),f.Qb(57,"ion-label"),f.uc(58),f.bc(59,"translate"),f.Pb(),f.Qb(60,"ion-select",8),f.Yb("ngModelChange",(function(t){return e.criteria.OrderBy=t})),f.tc(61,C,2,2,"ion-select-option",9),f.Pb(),f.Pb(),f.Pb(),f.Qb(62,"div",19),f.Qb(63,"ion-button",20),f.Yb("click",(function(){return e.search()})),f.uc(64),f.bc(65,"translate"),f.Pb(),f.Pb(),f.Pb()),2&t&&(f.zb(3),f.vc(f.cc(4,26,"advanced-search.advancedSearch")),f.zb(5),f.vc(f.cc(9,28,"signin.Return")),f.zb(6),f.vc(f.cc(15,30,"advanced-search.Criteresderecherche")),f.zb(5),f.vc(f.cc(20,32,"advanced-search.Votrerecherche")),f.zb(2),f.hc("placeholder",f.cc(22,34,"advanced-search.Motcle")),f.gc("ngModel",e.criteria.SearchText),f.zb(4),f.vc(f.cc(26,36,"advanced-search.Categories")),f.zb(2),f.gc("ngModel",e.criteria.MainCategory),f.zb(1),f.gc("ngForOf",e.MainCategoryList),f.zb(3),f.vc(f.cc(32,38,"advanced-search.SousCategories")),f.zb(2),f.gc("ngModel",e.criteria.SecondCategory),f.zb(1),f.gc("ngForOf",e.getSecondCategoryList()),f.zb(3),f.xc("",f.cc(38,40,"advanced-search.Minquantitedachat"),": ",e.criteria.MinQuantity,""),f.zb(2),f.gc("ngModel",e.criteria.MinQuantity),f.zb(5),f.yc("",f.cc(45,42,"advanced-search.Prix"),": ",e.criteria.PriceInterval.lower," - ",e.criteria.PriceInterval.upper," \u20ac"),f.zb(2),f.gc("ngModel",e.criteria.PriceInterval),f.zb(5),f.yc("",f.cc(52,44,"advanced-search.Prix"),", ",f.cc(53,46,"advanced-search.Nouveaute")," , ",f.cc(54,48,"advanced-search.Popularite")," "),f.zb(7),f.wc("",f.cc(59,50,"advanced-search.Trierpar")," "),f.zb(2),f.gc("ngModel",e.criteria.OrderBy),f.zb(1),f.gc("ngForOf",e.OrderByList),f.zb(3),f.wc("",f.cc(65,52,"advanced-search.Search")," "))},directives:[b.t,b.V,b.U,b.i,b.h,b.u,b.q,b.B,b.z,b.A,b.y,b.eb,u.i,u.l,b.J,b.db,l.j,b.F,b.K],pipes:[y.c],styles:[""]}),w),Q=c("e8h1"),M=c("x7k0");function I(t,e){if(1&t){var n=f.Rb();f.Qb(0,"ion-buttons",2),f.Qb(1,"ion-button",3),f.Yb("click",(function(){return f.nc(n),f.ac().advancedSearchPage()})),f.Lb(2,"ion-icon",10),f.Pb(),f.Pb()}}function T(t,e){1&t&&(f.Qb(0,"div",11),f.Lb(1,"ion-spinner"),f.Qb(2,"p",12),f.uc(3),f.bc(4,"translate"),f.Pb(),f.Pb()),2&t&&(f.zb(3),f.wc("",f.cc(4,1,"Loading"),"..."))}function k(t,e){1&t&&(f.Qb(0,"p",13),f.uc(1),f.bc(2,"translate"),f.Pb()),2&t&&(f.zb(1),f.wc(" ",f.cc(2,1,"NoDataToDisplay"),""))}function x(t,e){1&t&&f.Lb(0,"img",23)}function z(t,e){if(1&t&&f.Lb(0,"ion-img",24),2&t){var n=f.ac().$implicit,r=f.ac(2);f.gc("src",r.host+n.DefaultPhotoPath)}}function _(t,e){if(1&t&&(f.Qb(0,"p",25),f.uc(1),f.Qb(2,"span",26),f.uc(3,"\u20ac"),f.Pb(),f.Pb()),2&t){var n=f.ac().$implicit;f.zb(1),f.wc("",n.Price," "),f.zb(1),f.gc("hidden",null==n.Price)}}function D(t,e){if(1&t){var n=f.Rb();f.Qb(0,"ion-item",15),f.Yb("click",(function(){f.nc(n);var t=e.$implicit;return f.ac(2).productDetail(t)})),f.Qb(1,"ion-avatar",16),f.tc(2,x,1,0,"img",17),f.tc(3,z,1,1,"ion-img",18),f.Pb(),f.Qb(4,"ion-label"),f.tc(5,_,4,2,"p",19),f.Qb(6,"h2",20),f.uc(7),f.Pb(),f.Qb(8,"p"),f.uc(9),f.bc(10,"translate"),f.Pb(),f.Qb(11,"p"),f.uc(12),f.bc(13,"translate"),f.Pb(),f.Qb(14,"span",21),f.Yb("click",(function(t){f.nc(n);var r=e.$implicit;return f.ac(2).addInCart(t,r)})),f.Lb(15,"ion-icon",22),f.Pb(),f.Qb(16,"p"),f.uc(17),f.bc(18,"translate"),f.Pb(),f.Pb(),f.Pb()}if(2&t){var r=e.$implicit,a=f.ac(2);f.zb(2),f.gc("ngIf",null==r.DefaultPhotoPath),f.zb(1),f.gc("ngIf",null!=r.DefaultPhotoPath),f.zb(2),f.gc("ngIf",a.logined),f.zb(1),f.gc("id",r.ReferenceId),f.zb(1),f.vc(r.Label),f.zb(2),f.xc("",f.cc(10,11,"newproduct.QuantityEachBox")," : ",r.QuantityPerBox,""),f.zb(3),f.xc("",f.cc(13,13,"newproduct.QuantityMinimum")," : ",r.MinQuantity,""),f.zb(5),f.xc("",f.cc(18,15,"newproduct.Reference")," : ",r.Code,"")}}function O(t,e){if(1&t&&(f.Qb(0,"ion-list"),f.tc(1,D,19,17,"ion-item",14),f.Pb()),2&t){var n=f.ac();f.zb(1),f.gc("ngForOf",n.productList)}}function E(t,e){1&t&&f.Lb(0,"ion-img",35)}function R(t,e){if(1&t&&f.Lb(0,"ion-img",36),2&t){var n=f.ac().$implicit,r=f.ac(2);f.gc("src",r.host+n.DefaultPhotoPath)}}function B(t,e){if(1&t&&(f.Qb(0,"ion-label"),f.uc(1),f.Qb(2,"span",26),f.uc(3,"\u20ac"),f.Pb(),f.Pb()),2&t){var n=f.ac().$implicit;f.zb(1),f.wc("",n.Price," "),f.zb(1),f.gc("hidden",null==n.Price)}}function j(t,e){if(1&t){var n=f.Rb();f.Qb(0,"ion-col",28),f.Yb("click",(function(){f.nc(n);var t=e.$implicit;return f.ac(2).productDetail(t)})),f.Qb(1,"ion-card",29),f.tc(2,E,1,0,"ion-img",30),f.tc(3,R,1,1,"ion-img",31),f.Qb(4,"ion-card-header",32),f.Qb(5,"ion-card-title",33),f.uc(6),f.Pb(),f.Qb(7,"ion-card-subtitle"),f.uc(8),f.bc(9,"translate"),f.Pb(),f.Qb(10,"ion-card-subtitle"),f.uc(11),f.bc(12,"translate"),f.Pb(),f.Pb(),f.Qb(13,"ion-card-content",34),f.tc(14,B,4,2,"ion-label",7),f.Qb(15,"span",21),f.Yb("click",(function(t){f.nc(n);var r=e.$implicit;return f.ac(2).addInCart(t,r)})),f.Lb(16,"ion-icon",22),f.Pb(),f.Pb(),f.Pb(),f.Pb()}if(2&t){var r=e.$implicit,a=f.ac(2);f.zb(2),f.gc("ngIf",null==r.DefaultPhotoPath),f.zb(1),f.gc("ngIf",null!=r.DefaultPhotoPath),f.zb(3),f.vc(r.Label),f.zb(2),f.xc("",f.cc(9,8,"newproduct.Reference")," : ",r.Code,""),f.zb(3),f.xc("",f.cc(12,10,"newproduct.QuantityEachBox")," : ",r.QuantityPerBox,""),f.zb(3),f.gc("ngIf",a.logined)}}function K(t,e){if(1&t&&(f.Qb(0,"ion-row"),f.tc(1,j,17,12,"ion-col",27),f.Pb()),2&t){var n=f.ac();f.zb(1),f.gc("ngForOf",n.productList)}}var F,Y,G,A,$,q=[{path:"",component:(F=function(e){a(c,e);var o=i(c);function c(e,n,r,a,i,s,l,u,b){var d;return t(this,c),(d=o.call(this)).router=e,d.navCtrl=n,d.network=r,d.rest=a,d.toastCtrl=i,d.storage=s,d.utilis=l,d.modalCtrl=u,d.translate=b,d.loading=!0,d.SecondReferenceId=0,d.Title="",d.productList=[],d.step=10,d.counter=0,d.layoutColumn=!1,d.advancedSearchCriteria={SearchText:null,MainCategory:null,SecondCategory:null,PriceInterval:{lower:0,upper:200},MinQuantity:200,OrderBy:null},d.host=h.a.SERVER_API_URL,d.logined=!1,d}return n(c,[{key:"ngOnInit",value:function(){this.checkLogined(),this.PageType=this.router.snapshot.queryParams.PageType,this.SecondReferenceId=parseInt(this.router.snapshot.queryParams.ReferenceId),this.Title=this.router.snapshot.queryParams.Title,this.loadProductList()}},{key:"toggleLayout",value:function(){this.layoutColumn=!this.layoutColumn,localStorage.setItem("productListLayoutColumn",this.layoutColumn.toString())}},{key:"ionViewWillEnter",value:function(){var t=localStorage.getItem("productListLayoutColumn");this.layoutColumn=null==t||JSON.parse(t)}},{key:"productDetail",value:function(t){this.navCtrl.navigateForward("ProductDetailPage",{queryParams:{productId:t.ProductId}})}},{key:"checkLogined",value:function(){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.utilis.checkIsLogined();case 2:this.logined=t.sent;case 3:case"end":return t.stop()}}),t,this)})))}},{key:"loadProductList",value:function(){var t=this;if(null!=this.PageType)switch(this.PageType){case"BySecondCategory":this.rest.GetProductListBySecondCategory(this.SecondReferenceId,this.counter,this.step).subscribe((function(e){e.Success&&null!=e.Data?t.productList=e.Data.ProductListData:r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error"))}),(function(e){t.loading=!1,r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error"))}),(function(){return t.loading=!1}));break;case"NewProduct":this.rest.GetProductListByPublishDate(this.counter,this.step).subscribe((function(e){e.Success&&null!=e.Data?t.productList=e.Data.ProductListData:r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error"))}),(function(e){r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}),(function(){return t.loading=!1}));break;case"BestSalesProduct":this.rest.GetProductListBySalesPerformance(this.counter,this.step).subscribe((function(e){e.Success&&null!=e.Data?t.productList=e.Data.ProductListData:r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error"))}),(function(e){r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error"))}),(function(){return t.loading=!1}));break;case"FavoriteList":this.rest.GetFavoriteListByUserId({UserId:localStorage.getItem("userId"),Lang:this.translate.defaultLang,Begin:this.counter,Step:this.step}).subscribe((function(e){null!=e&&null!=e.TotalCount&&null!=e.List?t.productList=e.List:r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}),(function(e){r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}));break;case"SimpleProductSearch":this.rest.SimpleProductSearch({SearchText:this.router.snapshot.queryParams.SearchText,Lang:this.translate.defaultLang,Begin:this.counter,Step:this.step}).subscribe((function(e){null!=e&&null!=e.TotalCount&&null!=e.List?t.productList=e.List:r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}),(function(e){r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}));break;case"LowerPriceProduct":this.rest.GetProductByPrice({Lang:this.translate.defaultLang,Step:this.step,Begin:this.counter}).subscribe((function(e){null!=e&&null!=e.TotalCount&&null!=e.List?t.productList=e.List:r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}),(function(e){r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}));break;case"AdvancedProductSearch":if(this.loading=!0,null!=this.advancedSearchCriteria){var e=this.advancedSearchCriteria;e.Begin=this.counter,e.Step=this.step,e.Lang=this.translate.defaultLang,e.PriceIntervalLower=this.advancedSearchCriteria.PriceInterval.lower,e.PriceIntervalUpper=this.advancedSearchCriteria.PriceInterval.upper,this.rest.AdvancedProductSearchClient(e).subscribe((function(e){null!=e&&null!=e.TotalCount&&null!=e.List?t.productList=e.List:r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}),(function(e){r(s(c.prototype),"showToast",t).call(t,t.toastCtrl,t.translate.instant("Msg_Error")),t.loading=!1}))}else this.loading=!1}else r(s(c.prototype),"showToast",this).call(this,this.toastCtrl,this.translate.instant("Msg_Offline"))}},{key:"doInfinite",value:function(t){var e=this;if("none"!=this.network.type)switch(this.counter=this.counter+1,this.PageType){case"BySecondCategory":this.rest.GetProductListBySecondCategory(this.SecondReferenceId,this.counter,this.step).subscribe((function(n){n.Success?n.Data.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.Data.ProductListData?n.Data.ProductListData:[]),t.target.complete()):r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"NewProduct":this.rest.GetProductListByPublishDate(this.counter,this.step).subscribe((function(n){n.Success?n.Data.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.Data.ProductListData?n.Data.ProductListData:[]),t.target.complete()):r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"BestSalesProduct":this.rest.GetProductListBySalesPerformance(this.counter,this.step).subscribe((function(n){n.Success?n.Data.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.Data.ProductListData?n.Data.ProductListData:[]),t.target.complete()):r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"FavoriteList":this.rest.GetFavoriteListByUserId({UserId:localStorage.getItem("userId"),Lang:this.translate.defaultLang,Begin:this.counter,Step:this.step}).subscribe((function(n){null!=n&&null!=n.TotalCount&&null!=n.List?n.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.List?n.List:[]),t.target.complete()):r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"LowerPriceProduct":this.rest.GetProductByPrice({Lang:this.translate.defaultLang,Step:this.step,Begin:this.counter}).subscribe((function(n){null!=n&&null!=n.TotalCount&&null!=n.List?n.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.List?n.List:[]),t.target.complete()):r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"SimpleProductSearch":this.rest.SimpleProductSearch({SearchText:this.router.snapshot.queryParams.SearchText,Lang:this.translate.defaultLang,Begin:this.counter,Step:this.step}).subscribe((function(n){null!=n&&null!=n.TotalCount&&null!=n.List?n.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.List?n.List:[]),t.target.complete()):r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}));break;case"AdvancedProductSearch":if(null!=this.advancedSearchCriteria){var n=this.advancedSearchCriteria;n.Begin=this.counter,n.Step=this.step,n.Lang=this.translate.defaultLang,this.rest.AdvancedProductSearchClient(n).subscribe((function(n){null!=n&&null!=n.TotalCount&&null!=n.List?n.TotalCount<=e.step*e.counter?(t.target.complete(),t.target.disabled=!0):(e.productList=e.productList.concat(null!=n.List?n.List:[]),t.target.complete()):r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}),(function(t){r(s(c.prototype),"showToast",e).call(e,e.toastCtrl,e.translate.instant("Msg_Error"))}))}}else r(s(c.prototype),"showToast",this).call(this,this.toastCtrl,this.translate.instant("Msg_Offline"))}},{key:"advancedSearchPage",value:function(){return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalCtrl.create({component:S,componentProps:{criteriaPassed:this.advancedSearchCriteria}});case 2:return e=t.sent,t.next=5,e.present();case 5:return t.next=7,e.onWillDismiss();case 7:n=t.sent,null!=(r=n.data)&&(this.advancedSearchCriteria=r,this.loadProductList());case 10:case"end":return t.stop()}}),t,this)})))}},{key:"addInCart",value:function(t,e){var n=this,a=Object.create(null,{showToast:{get:function(){return r(s(c.prototype),"showToast",n)}}});return Object(p.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.stopPropagation(),n.t0=JSON,n.next=4,this.utilis.getKey("cartProductList");case 4:n.t1=n.sent,null==(r=n.t0.parse.call(n.t0,n.t1))&&(r=[]),null==r.find((function(t){return t.ReferenceId==e.ReferenceId}))&&(null==e.Quantity&&(e.Quantity=0),r.push(e)),r.forEach((function(t){t.ReferenceId==e.ReferenceId&&(t.Quantity=t.Quantity+1),null==t.Selected&&(t.Selected=!1)})),this.storage.set("cartProductList",JSON.stringify(r)),a.showToast.call(this,this.toastCtrl,this.translate.instant("Msg_AddInCart"));case 7:case"end":return n.stop()}}),n,this)})))}}]),c}(g.a),F.\u0275fac=function(t){return new(t||F)(f.Kb(d.a),f.Kb(b.ab),f.Kb(m.a),f.Kb(P.a),f.Kb(b.fb),f.Kb(Q.b),f.Kb(M.a),f.Kb(b.Z),f.Kb(y.d))},F.\u0275cmp=f.Eb({type:F,selectors:[["app-newproduct"]],features:[f.wb],decls:17,vars:6,consts:[["slot","start"],["slot","end",4,"ngIf"],["slot","end"],["icon-only","","small","",3,"click"],["name","menu"],["class","ion-text-center spinner ion-margin-top",4,"ngIf"],["class","ion-text-center",4,"ngIf"],[4,"ngIf"],[3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Loading"],["name","search",1,"searchButtonColor"],[1,"ion-text-center","spinner","ion-margin-top"],["text-center","","font-size-small","",1,"ion-text-center"],[1,"ion-text-center"],["button","","detail","false",3,"click",4,"ngFor","ngForOf"],["button","","detail","false",3,"click"],["slot","start",2,"width","60px","height","60px"],["class","productImg","src","assets/imgs/not-found.png",4,"ngIf"],["class","productImg",3,"src",4,"ngIf"],["style","float: right; margin-top: 25px;",4,"ngIf"],[1,"productLabelClass",3,"id"],["slot","icon-only","icon-only","","float-right","",1,"ion-float-right",2,"font-size","1em","padding","1px 0px",3,"click"],["name","cart","slot","icon-only"],["src","assets/imgs/not-found.png",1,"productImg"],[1,"productImg",3,"src"],[2,"float","right","margin-top","25px"],[3,"hidden"],["size","6",3,"click",4,"ngFor","ngForOf"],["size","6",3,"click"],["button","true",1,"ion-no-margin"],["src","assets/imgs/not-found.png",4,"ngIf"],[3,"src",4,"ngIf"],[1,"ion-padding",2,"padding-bottom","0px"],[2,"font-size","16px"],[2,"padding-bottom","5px"],["src","assets/imgs/not-found.png"],[3,"src"]],template:function(t,e){1&t&&(f.Qb(0,"ion-header"),f.Qb(1,"ion-toolbar"),f.Qb(2,"ion-title"),f.uc(3),f.Pb(),f.Qb(4,"ion-buttons",0),f.Lb(5,"ion-back-button"),f.Pb(),f.tc(6,I,3,0,"ion-buttons",1),f.Qb(7,"ion-buttons",2),f.Qb(8,"ion-button",3),f.Yb("click",(function(){return e.toggleLayout()})),f.Lb(9,"ion-icon",4),f.Pb(),f.Pb(),f.Pb(),f.Pb(),f.Qb(10,"ion-content"),f.tc(11,T,5,3,"div",5),f.tc(12,k,3,3,"p",6),f.tc(13,O,2,1,"ion-list",7),f.tc(14,K,2,1,"ion-row",7),f.Qb(15,"ion-infinite-scroll",8),f.Yb("ionInfinite",(function(t){return e.doInfinite(t)})),f.Lb(16,"ion-infinite-scroll-content",9),f.Pb(),f.Pb()),2&t&&(f.zb(3),f.vc(e.Title),f.zb(3),f.gc("ngIf","AdvancedProductSearch"==e.PageType),f.zb(5),f.gc("ngIf",e.loading),f.zb(1),f.gc("ngIf",!e.loading&&(null==e.productList||e.productList.length<=0)),f.zb(1),f.gc("ngIf",!e.layoutColumn),f.zb(1),f.gc("ngIf",e.layoutColumn))},directives:[b.t,b.V,b.U,b.i,b.e,b.f,l.k,b.h,b.u,b.q,b.w,b.x,b.O,b.B,l.j,b.z,b.d,b.A,b.v,b.H,b.p,b.j,b.l,b.n,b.m,b.k],pipes:[y.c],styles:[".productImg[_ngcontent-%COMP%]{border-radius:0!important;height:60px!important;width:60px!important}.productLabelClass[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),F)}],N=((Y=function e(){t(this,e)}).\u0275mod=f.Ib({type:Y}),Y.\u0275inj=f.Hb({factory:function(t){return new(t||Y)},imports:[[d.i.forChild(q)],d.i]}),Y),U=[{path:"",component:S}],J=(($=function e(){t(this,e)}).\u0275mod=f.Ib({type:$}),$.\u0275inj=f.Hb({factory:function(t){return new(t||$)},imports:[[d.i.forChild(U)],d.i]}),$),V=((A=function e(){t(this,e)}).\u0275mod=f.Ib({type:A}),A.\u0275inj=f.Hb({factory:function(t){return new(t||A)},imports:[[l.b,u.e,b.W,J,y.b]]}),A),W=((G=function e(){t(this,e)}).\u0275mod=f.Ib({type:G}),G.\u0275inj=f.Hb({factory:function(t){return new(t||G)},imports:[[l.b,u.e,b.W,N,y.b,V]]}),G)}}])}();